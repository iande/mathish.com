<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: OnStomp::Interfaces::FrameMethods
  
    &mdash; OnStomp Documentation
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (F)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../OnStomp.html" title="OnStomp (module)">OnStomp</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Interfaces.html" title="OnStomp::Interfaces (module)">Interfaces</a></span></span>
     &raquo; 
    <span class="title">FrameMethods</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: OnStomp::Interfaces::FrameMethods
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="../Client.html" title="OnStomp::Client (class)">Client</a></span>, <span class='object_link'><a href="../Components/Scopes/HeaderScope.html" title="OnStomp::Components::Scopes::HeaderScope (class)">Components::Scopes::HeaderScope</a></span>, <span class='object_link'><a href="../Components/Scopes/ReceiptScope.html" title="OnStomp::Components::Scopes::ReceiptScope (class)">Components::Scopes::ReceiptScope</a></span>, <span class='object_link'><a href="../Components/Scopes/TransactionScope.html" title="OnStomp::Components::Scopes::TransactionScope (class)">Components::Scopes::TransactionScope</a></span>, <span class='object_link'><a href="../Failover/Client.html" title="OnStomp::Failover::Client (class)">Failover::Client</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/onstomp/interfaces/frame_methods.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Mixin for <span class='object_link'><a href="../Client.html" title="OnStomp::Client (class)">clients</a></span> to provide methods that create
and transmit STOMP <span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">frames</a></span>.</p>


  </div>
</div>
<div class="tags">
  
</div>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#abort-instance_method" title="#abort (instance method)">- (OnStomp::Components::Frame) <strong>abort</strong>(tx_id, headers = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Transmits an ABORT frame generated by the client&rsquo;s connection to rollback
a transaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ack-instance_method" title="#ack (instance method)">- (OnStomp::Components::Frame) <strong>ack</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Transmits an ACK frame generated by the client&rsquo;s connection.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#beat-instance_method" title="#beat (instance method)">- (OnStomp::Components::Frame) <strong>beat</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Transmits a client heartbeat frame generated by the client&rsquo;s connection.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#begin-instance_method" title="#begin (instance method)">- (OnStomp::Components::Frame) <strong>begin</strong>(tx_id, headers = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Transmits a BEGIN frame generated by the client&rsquo;s connection to start
a transaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#commit-instance_method" title="#commit (instance method)">- (OnStomp::Components::Frame) <strong>commit</strong>(tx_id, headers = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Transmits a COMMIT frame generated by the client&rsquo;s connection to complete
a transaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disconnect-instance_method" title="#disconnect (instance method)">- (OnStomp::Components::Frame) <strong>disconnect</strong>(headers = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Transmits a DISCONNECT frame generated by the client&rsquo;s connection to end
the STOMP session.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nack-instance_method" title="#nack (instance method)">- (OnStomp::Components::Frame) <strong>nack</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Transmits a NACK frame generated by the client&rsquo;s connection.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send-instance_method" title="#send (instance method)">- (OnStomp::Components::Frame) <strong>send</strong>(dest, body, headers = {}) {|receipt| ... }</a>
    

    
      (also: #puts)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Transmits a SEND frame generated by the client&rsquo;s connection.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#subscribe-instance_method" title="#subscribe (instance method)">- (OnStomp::Components::Frame) <strong>subscribe</strong>(dest, headers = {}) {|message| ... }</a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Transmits a SUBSCRIBE frame generated by the client&rsquo;s connection.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unsubscribe-instance_method" title="#unsubscribe (instance method)">- (OnStomp::Components::Frame) <strong>unsubscribe</strong>(frame_or_id, headers = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Transmits an UNSUBSCRIBE frame generated by the client&rsquo;s connection.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="abort-instance_method">
  
    - (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>abort</strong>(tx_id, headers = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Transmits an ABORT frame generated by the client&rsquo;s connection to rollback
a transaction.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code"><span class='id client'>client</span><span class='period'>.</span><span class='id begin'>begin</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>t-1234</span><span class='tstring_end'>'</span></span>
<span class='id client'>client</span><span class='period'>.</span><span class='id send'>send</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/test</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hello transaction!</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:transaction</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>t-1234</span><span class='tstring_end'>'</span></span>
<span class='id client'>client</span><span class='period'>.</span><span class='id abort'>abort</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>t-1234</span><span class='tstring_end'>'</span></span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>tx_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>identifier for the transaction</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>additional headers to include in
the frame</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>headers</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">:receipt</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>A receipt ID for the frame, this
will be matched by the :&rsquo;receipt-id&rsquo; header in the broker&rsquo;s RECEIPT
response.</p>
</div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>ABORT frame</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>OnStomp::UnsupportedCommandError if the connection does not support
ABORT frames</p>
</div>
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#begin-instance_method" title="OnStomp::Interfaces::FrameMethods#begin (method)">#begin</a></span></li>
    
      <li><span class='object_link'><a href="#commit-instance_method" title="OnStomp::Interfaces::FrameMethods#commit (method)">#commit</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/onstomp/interfaces/frame_methods.rb', line 194</span>

<span class='kw'>def</span> <span class='id abort'>abort</span> <span class='id tx_id'>tx_id</span><span class='comma'>,</span> <span class='id headers'>headers</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id transmit'>transmit</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id abort_frame'>abort_frame</span><span class='lparen'>(</span><span class='id tx_id'>tx_id</span><span class='comma'>,</span> <span class='id headers'>headers</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ack-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>ack</strong>(message_frame, headers = {}) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>ack</strong>(message_id, headers = {}) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>ack</strong>(message_id, subscription_id, headers = {}) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Transmits an ACK frame generated by the client&rsquo;s connection.</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>ack</strong>(message_frame, headers = {}) </span>
        <div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong> 
    <div class='inline'><p>Users should use this form whenever possible as it will work
with STOMP 1.0 and 1.1 connections.</p>
</div>
  </div>

<p>Generates an ACK frame for the given MESSAGE frame.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code"><span class='id client'>client</span><span class='period'>.</span><span class='id subscribe'>subscribe</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/test</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:ack</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>client</span><span class='tstring_end'>'</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id m'>m</span><span class='op'>|</span>
  <span class='kw'>if</span> <span class='id m'>m</span><span class='lbracket'>[</span><span class='symbol'>:x-of-interest-to-me</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hells yes</span><span class='tstring_end'>'</span></span>
    <span class='id client'>client</span><span class='period'>.</span><span class='id ack'>ack</span> <span class='id m'>m</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>message_frame</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the MESSAGE frame to
acknowledge.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>additional headers to include in
the frame</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>ack</strong>(message_id, headers = {}) </span>
        <div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong> 
    <div class='inline'><p>This form will raise an <code>ArgumentError</code> with STOMP 1.1 connections
as a subscription ID is also required to ACK a received MESSAGE.</p>
</div>
  </div>

<p>Generates an ACK frame for the given <code>message-id</code>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code"><span class='id client'>client</span><span class='period'>.</span><span class='id subscribe'>subscribe</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/test</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:ack</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>client</span><span class='tstring_end'>'</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id m'>m</span><span class='op'>|</span>
  <span class='kw'>if</span> <span class='id m'>m</span><span class='lbracket'>[</span><span class='symbol'>:x-of-interest-to-me</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hells yes</span><span class='tstring_end'>'</span></span>
    <span class='id client'>client</span><span class='period'>.</span><span class='id ack'>ack</span> <span class='id m'>m</span><span class='lbracket'>[</span><span class='symbol'>:message-id</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>message_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>message-id</code> header of MESSAGE frame to
acknowledge.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>additional headers to include in
the frame</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>ack</strong>(message_id, subscription_id, headers = {}) </span>
        <div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong> 
    <div class='inline'><p>This form should be used with STOMP 1.1 connections when it is
not possible to provide the actual MESSAGE frame.</p>
</div>
  </div>

<p>Generates an ACK frame for the given <code>message-id</code> and <code>subscription</code>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code"><span class='id client'>client</span><span class='period'>.</span><span class='id subscribe'>subscribe</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/test</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:ack</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>client</span><span class='tstring_end'>'</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id m'>m</span><span class='op'>|</span>
  <span class='kw'>if</span> <span class='id m'>m</span><span class='lbracket'>[</span><span class='symbol'>:x-of-interest-to-me</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hells yes</span><span class='tstring_end'>'</span></span>
    <span class='id client'>client</span><span class='period'>.</span><span class='id ack'>ack</span> <span class='id m'>m</span><span class='lbracket'>[</span><span class='symbol'>:message-id</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id m'>m</span><span class='lbracket'>[</span><span class='symbol'>:subscription</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>message_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>message-id</code> header of MESSAGE frame to
acknowledge.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>subscription_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>subscription</code> header of MESSAGE frame to
acknowledge.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>additional headers to include in
the frame</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>ACK frame</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>OnStomp::UnsupportedCommandError if the connection does not support
ACK frames</p>
</div>
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#nack-instance_method" title="OnStomp::Interfaces::FrameMethods#nack (method)">#nack</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


300
301
302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/onstomp/interfaces/frame_methods.rb', line 300</span>

<span class='kw'>def</span> <span class='id ack'>ack</span> <span class='op'>*</span><span class='id args'>args</span>
  <span class='id transmit'>transmit</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id ack_frame'>ack_frame</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="beat-instance_method">
  
    - (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>beat</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Transmits a client heartbeat frame generated by the client&rsquo;s connection.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code"><span class='comment'># If it's been a while since you've sent any data to the broker:
</span><span class='id client'>client</span><span class='period'>.</span><span class='id beat'>beat</span>
<span class='comment'># Now the broker knows you're still listening, nay hanging on its every
</span><span class='comment'># every word.</span></pre>
    
  </div>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>heartbeat frame</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>OnStomp::UnsupportedCommandError if the connection does not support
heartbeat frames</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


357
358
359</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/onstomp/interfaces/frame_methods.rb', line 357</span>

<span class='kw'>def</span> <span class='id beat'>beat</span>
  <span class='id transmit'>transmit</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id heartbeat_frame'>heartbeat_frame</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="begin-instance_method">
  
    - (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>begin</strong>(tx_id, headers = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Transmits a BEGIN frame generated by the client&rsquo;s connection to start
a transaction.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code"><span class='id client'>client</span><span class='period'>.</span><span class='id begin'>begin</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>t-1234</span><span class='tstring_end'>'</span></span>
<span class='id client'>client</span><span class='period'>.</span><span class='id send'>send</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/test</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hello transaction!</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:transaction</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>t-1234</span><span class='tstring_end'>'</span></span>
<span class='id client'>client</span><span class='period'>.</span><span class='id commit'>commit</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>t-1234</span><span class='tstring_end'>'</span></span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>tx_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>identifier for the transaction</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>additional headers to include in
the frame</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>headers</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">:receipt</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>A receipt ID for the frame, this
will be matched by the :&rsquo;receipt-id&rsquo; header in the broker&rsquo;s RECEIPT
response.</p>
</div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>BEGIN frame</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>OnStomp::UnsupportedCommandError if the connection does not support
BEGIN frames</p>
</div>
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#abort-instance_method" title="OnStomp::Interfaces::FrameMethods#abort (method)">#abort</a></span></li>
    
      <li><span class='object_link'><a href="#commit-instance_method" title="OnStomp::Interfaces::FrameMethods#commit (method)">#commit</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/onstomp/interfaces/frame_methods.rb', line 172</span>

<span class='kw'>def</span> <span class='kw'>begin</span> <span class='id tx_id'>tx_id</span><span class='comma'>,</span> <span class='id headers'>headers</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id transmit'>transmit</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id begin_frame'>begin_frame</span><span class='lparen'>(</span><span class='id tx_id'>tx_id</span><span class='comma'>,</span> <span class='id headers'>headers</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="commit-instance_method">
  
    - (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>commit</strong>(tx_id, headers = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Transmits a COMMIT frame generated by the client&rsquo;s connection to complete
a transaction.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code"><span class='id client'>client</span><span class='period'>.</span><span class='id begin'>begin</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>t-1234</span><span class='tstring_end'>'</span></span>
<span class='id client'>client</span><span class='period'>.</span><span class='id send'>send</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/test</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hello transaction!</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:transaction</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>t-1234</span><span class='tstring_end'>'</span></span>
<span class='id client'>client</span><span class='period'>.</span><span class='id commit'>commit</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>t-1234</span><span class='tstring_end'>'</span></span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>tx_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>identifier for the transaction</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>additional headers to include in
the frame</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>headers</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">:receipt</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>A receipt ID for the frame, this
will be matched by the :&rsquo;receipt-id&rsquo; header in the broker&rsquo;s RECEIPT
response.</p>
</div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>COMMIT frame</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>OnStomp::UnsupportedCommandError if the connection does not support
COMMIT frames</p>
</div>
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#abort-instance_method" title="OnStomp::Interfaces::FrameMethods#abort (method)">#abort</a></span></li>
    
      <li><span class='object_link'><a href="#begin-instance_method" title="OnStomp::Interfaces::FrameMethods#begin (method)">#begin</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


216
217
218</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/onstomp/interfaces/frame_methods.rb', line 216</span>

<span class='kw'>def</span> <span class='id commit'>commit</span> <span class='id tx_id'>tx_id</span><span class='comma'>,</span> <span class='id headers'>headers</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id transmit'>transmit</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id commit_frame'>commit_frame</span><span class='lparen'>(</span><span class='id tx_id'>tx_id</span><span class='comma'>,</span> <span class='id headers'>headers</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="disconnect-instance_method">
  
    - (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>disconnect</strong>(headers = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Transmits a DISCONNECT frame generated by the client&rsquo;s connection to end
the STOMP session.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code"><span class='id client'>client</span><span class='period'>.</span><span class='id connect'>connect</span>
<span class='id client'>client</span><span class='period'>.</span><span class='id send'>send</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/test</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>a quick message</span><span class='tstring_end'>'</span></span>
<span class='id client'>client</span><span class='period'>.</span><span class='id disconnect'>disconnect</span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>additional headers to include in
the frame</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>headers</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">:receipt</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>A receipt ID for the frame, this
will be matched by the :&rsquo;receipt-id&rsquo; header in the broker&rsquo;s RECEIPT
response.</p>
</div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>DISCONNECT frame</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>OnStomp::UnsupportedCommandError if the connection does not support
DISCONNECT frames</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


235
236
237</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/onstomp/interfaces/frame_methods.rb', line 235</span>

<span class='kw'>def</span> <span class='id disconnect'>disconnect</span> <span class='id headers'>headers</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id transmit'>transmit</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id disconnect_frame'>disconnect_frame</span> <span class='id headers'>headers</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="nack-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>nack</strong>(message_frame, headers = {}) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>nack</strong>(message_id, subscription_id, heders = {}) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Transmits a NACK frame generated by the client&rsquo;s connection.</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>nack</strong>(message_frame, headers = {}) </span>
        <div class="docstring">
  <div class="discussion">
    <p>Generates a NACK frame for the given MESSAGE frame.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code"><span class='id client'>client</span><span class='period'>.</span><span class='id subscribe'>subscribe</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/test</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:ack</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>client</span><span class='tstring_end'>'</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id m'>m</span><span class='op'>|</span>
  <span class='kw'>if</span> <span class='id m'>m</span><span class='lbracket'>[</span><span class='symbol'>:x-of-interest-to-me</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hells no!</span><span class='tstring_end'>'</span></span>
    <span class='id client'>client</span><span class='period'>.</span><span class='id nack'>nack</span> <span class='id m'>m</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>message_frame</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the MESSAGE frame to
un-acknowledge.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>additional headers to include in
the frame</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>nack</strong>(message_id, subscription_id, heders = {}) </span>
        <div class="docstring">
  <div class="discussion">
    <p>Generates a NACK frame for the given <code>message-id</code> and <code>subscription</code>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code"><span class='id client'>client</span><span class='period'>.</span><span class='id subscribe'>subscribe</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/test</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:ack</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>client</span><span class='tstring_end'>'</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id m'>m</span><span class='op'>|</span>
  <span class='kw'>if</span> <span class='id m'>m</span><span class='lbracket'>[</span><span class='symbol'>:x-of-interest-to-me</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hells no!</span><span class='tstring_end'>'</span></span>
    <span class='id client'>client</span><span class='period'>.</span><span class='id nack'>nack</span> <span class='id m'>m</span><span class='lbracket'>[</span><span class='symbol'>:message-id</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id m'>m</span><span class='lbracket'>[</span><span class='symbol'>:subscription</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>message_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>message-id</code> header of MESSAGE frame to
un-acknowledge.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>subscription_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>subscription</code> header of MESSAGE frame to
un-acknowledge.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>additional headers to include in
the frame</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>NACK frame</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>OnStomp::UnsupportedCommandError if the connection does not support
NACK frames</p>
</div>
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#ack-instance_method" title="OnStomp::Interfaces::FrameMethods#ack (method)">#ack</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


343
344
345</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/onstomp/interfaces/frame_methods.rb', line 343</span>

<span class='kw'>def</span> <span class='id nack'>nack</span> <span class='op'>*</span><span class='id args'>args</span>
  <span class='id transmit'>transmit</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id nack_frame'>nack_frame</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send-instance_method">
  
    - (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>send</strong>(dest, body, headers = {}) {|receipt| ... }
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='puts-instance_method'>puts</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>Transmits a SEND frame generated by the client&rsquo;s connection</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code"><span class='comment'># Transmit a simple SEND frame to the broker
</span><span class='id client'>client</span><span class='period'>.</span><span class='id send'>send</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/example</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Hello STOMP</span><span class='tstring_end'>'</span></span>

<span class='comment'># Everything's better with umlauts.
</span><span class='id client'>client</span><span class='period'>.</span><span class='id send'>send</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/topic/example</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hëllo Wörld</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='symbol'>:content-type</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>text/plain;charset=UTF-8</span><span class='tstring_end'>'</span></span>

<span class='comment'># Get a receipt for the SEND frame
</span><span class='id client'>client</span><span class='period'>.</span><span class='id send'>send</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/example</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Did you get that thing I sent you?</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id r'>r</span><span class='op'>|</span>
  <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The broker received our SEND frame</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>dest</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>destination for the frame</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>body</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>body of the frame</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>additional headers to include in
the frame</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <h3>Options Hash (<tt>headers</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">:'content-type'</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>The content type of the SEND
frame’s body. If the body is text (ie: has a non-binary <code>encoding</code>)
<code>onstomp</code> will set the :’content-type’ header to ‘text/plain’ if it
has not been set. See <a href="../../file.Encodings.html" title="Encodings">Encodings</a> for more
details.</p>
</div>
        </tr>
      
        <li>
          <span class="name">:receipt</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>A receipt ID for the frame, this
will be matched by the :’receipt-id’ header in the broker’s RECEIPT
response.</p>
</div>
        </tr>
      
        <li>
          <span class="name">:transaction</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>The ID of an existing transaction
to add this frame to.</p>
</div>
        </tr>
      
        <li>
          <span class="name">:'content-length'</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>If you set this header, it
will be overwritten, so save your fingers from a few keystrokes by not
setting it.  All SEND frames generated by <code>onstomp</code> will have a
:’content-length’ header.</p>
</div>
        </tr>
      
    </ul>
  
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>receipt</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>block to invoke when a RECEIPT frame is received for the
transmitted SEND frame</p>
</div>
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>receipt</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>RECEIPT for the frame</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>SEND frame</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>OnStomp::UnsupportedCommandError if the connection does not support
SEND frames</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/onstomp/interfaces/frame_methods.rb', line 59</span>

<span class='kw'>def</span> <span class='id send'>send</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id body'>body</span><span class='comma'>,</span> <span class='id headers'>headers</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id cb'>cb</span>
  <span class='id transmit'>transmit</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id send_frame'>send_frame</span><span class='lparen'>(</span><span class='id dest'>dest</span><span class='comma'>,</span> <span class='id body'>body</span><span class='comma'>,</span> <span class='id headers'>headers</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:receipt</span> <span class='op'>=&gt;</span> <span class='id cb'>cb</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="subscribe-instance_method">
  
    - (<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>) <strong>subscribe</strong>(dest, headers = {}) {|message| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Transmits a SUBSCRIBE frame generated by the client&rsquo;s connection. Depending
upon the connection, a subscription can be set to various MESSAGE
acknowledgement modes by setting the <code>:ack</code> header.
STOMP 1.0 and STOMP 1.1 connections support:
* :ack =&gt; &lsquo;auto&rsquo;
  The broker assumes that MESSAGE frames received through the
  subscription have been properly received, the client should NOT attempt
  to ACK (or NACK) any of the messages.
* :ack =&gt; &lsquo;client&rsquo;
  The broker assumes that MESSAGE frames should be acknowledged by the
  client through the use of ACK frames.
STOMP 1.1 connections support:
* :ack =&gt; &lsquo;client-individual&rsquo;
  Upon receiving an ACK frame for a MESSAGE frame, some brokers will
  mark the MESSAGE frame and all those sent to the client before it
  as acknowledged. This mode indicates that each MESSAGE frame must
  be acknowledged by its own ACK frame for the broker can assume the
  MESSAGE frame has been received by the client.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code"><span class='comment'># A basic subscription
</span><span class='id client'>client</span><span class='period'>.</span><span class='id subscribe'>subscribe</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/example</span><span class='tstring_end'>'</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id m'>m</span><span class='op'>|</span>
  <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Got a MESSAGE: </span><span class='embexpr_beg'>#{</span><span class='id m'>m</span><span class='period'>.</span><span class='id body'>body</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='comment'># ACK our MESSAGE frames
</span><span class='id client'>client</span><span class='period'>.</span><span class='id subscribe'>subscribe</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/queue/example</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:ack</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>client</span><span class='tstring_end'>'</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id m'>m</span><span class='op'>|</span>
  <span class='id client'>client</span><span class='period'>.</span><span class='id ack'>ack</span> <span class='id m'>m</span>
  <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Got (and ACK'd) a MESSAGE: </span><span class='embexpr_beg'>#{</span><span class='id m'>m</span><span class='period'>.</span><span class='id body'>body</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>dest</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>destination for the frame</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>additional headers to include in
the frame</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>headers</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">:id</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>A unique ID for the subscription. If you
do not set this header, an subscription ID will be automatically
generated ensuring that all <code>onstomp</code> SUBSCRIBE frames have an ID.</p>
</div>
        </tr>
      
        <li>
          <span class="name">:ack</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>'auto'</tt>
            
          </span>
          &mdash; <div class='inline'><p>The ack mode to use with this
subscription. A value of &lsquo;auto&rsquo; means MESSAGE frames are assumed
received and no ACK frame is necessary. A value of &lsquo;client&rsquo; or
&lsquo;client-individual&rsquo; means all MESSAGE frames should be acknowledged
with an ACK (or un-acknowledged with a NACK.)</p>
</div>
        </tr>
      
        <li>
          <span class="name">:selector</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>A SQL style filter to use against
MESSAGE frames (the form and availability of this will vary by
broker.)</p>
</div>
        </tr>
      
        <li>
          <span class="name">:receipt</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>A receipt ID for the frame, this
will be matched by the :&rsquo;receipt-id&rsquo; header in the broker&rsquo;s RECEIPT
response.</p>
</div>
        </tr>
      
    </ul>
  
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>message</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>block to invoke for every MESSAGE frame received on the
subscription</p>
</div>
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>MESSAGE frame received on
the subscription</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>SUBSCRIBE frame</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>OnStomp::UnsupportedCommandError if the connection does not support
SUBSCRIBE frames</p>
</div>
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#unsubscribe-instance_method" title="OnStomp::Interfaces::FrameMethods#unsubscribe (method)">#unsubscribe</a></span></li>
    
      <li><span class='object_link'><a href="#ack-instance_method" title="OnStomp::Interfaces::FrameMethods#ack (method)">#ack</a></span></li>
    
      <li><span class='object_link'><a href="#nack-instance_method" title="OnStomp::Interfaces::FrameMethods#nack (method)">#nack</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/onstomp/interfaces/frame_methods.rb', line 121</span>

<span class='kw'>def</span> <span class='id subscribe'>subscribe</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id headers'>headers</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id cb'>cb</span>
  <span class='id transmit'>transmit</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id subscribe_frame'>subscribe_frame</span><span class='lparen'>(</span><span class='id dest'>dest</span><span class='comma'>,</span> <span class='id headers'>headers</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:subscribe</span> <span class='op'>=&gt;</span> <span class='id cb'>cb</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unsubscribe-instance_method">
  
    
      <span class="overload">- (<tt>Object</tt>) <strong>unsubscribe</strong>(subscribe_frame, headers = {}) </span>
    
      <span class="overload">- (<tt>Object</tt>) <strong>unsubscribe</strong>(id, headers = {}) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Transmits an UNSUBSCRIBE frame generated by the client&rsquo;s connection.</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>Object</tt>) <strong>unsubscribe</strong>(subscribe_frame, headers = {}) </span>
        <div class="docstring">
  <div class="discussion">
    <p>Generates an UNSUBSCRIBE frame to match the given SUBSCRIBE frame</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code">sub = client.subscribe('/queue/test') { |m| ... }
client.unsubscribe sub</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>subscribe_frame</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>optional headers to include in
the UNSUBSCRIBE frame</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>Object</tt>) <strong>unsubscribe</strong>(id, headers = {}) </span>
        <div class="docstring">
  <div class="discussion">
    <p>Generates an UNSUBSCRIBE frame with the given id</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'>
</div></h4>
      <pre class="example code">client.subscribe('/queue/test', :id =&gt; 's-1234') { |m| ... }
client.unsubscribe 's-1234'</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>{#to_sym =&gt; #to_s}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>optional headers to include in
the UNSUBSCRIBE frame</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>headers</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">:receipt</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>A receipt ID for the frame, this
will be matched by the :&rsquo;receipt-id&rsquo; header in the broker&rsquo;s RECEIPT
response.</p>
</div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Components/Frame.html" title="OnStomp::Components::Frame (class)">OnStomp::Components::Frame</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>UNSUBSCRIBE frame</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>OnStomp::UnsupportedCommandError if the connection does not support
UNSUBSCRIBE frames</p>
</div>
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#subscribe-instance_method" title="OnStomp::Interfaces::FrameMethods#subscribe (method)">#subscribe</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/onstomp/interfaces/frame_methods.rb', line 150</span>

<span class='kw'>def</span> <span class='id unsubscribe'>unsubscribe</span> <span class='id frame_or_id'>frame_or_id</span><span class='comma'>,</span> <span class='id headers'>headers</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id transmit'>transmit</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id unsubscribe_frame'>unsubscribe_frame</span><span class='lparen'>(</span><span class='id frame_or_id'>frame_or_id</span><span class='comma'>,</span> <span class='id headers'>headers</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Oct 13 10:57:29 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.1 (ruby-1.9.2).
</div>

  </body>
</html>